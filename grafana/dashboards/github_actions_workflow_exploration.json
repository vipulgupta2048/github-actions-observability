{
  "id": null,
  "uid": "gh-workflow-exploration",
  "title": "GitHub Actions - Workflow Exploration",
  "tags": ["github", "actions", "exploration", "detailed", "drill-down"],
  "timezone": "browser",
  "editable": true,
  "graphTooltip": 1,
  "description": "Detailed exploration dashboard for GitHub Actions with multi-filter interface, searchable workflow runs, and drill-down capabilities",
  "time": {
    "from": "now-24h",
    "to": "now"
  },
  "timepicker": {
    "refresh_intervals": ["5s", "10s", "30s", "1m", "5m", "15m", "30m", "1h", "2h", "1d"],
    "quick_ranges": [
      {"display": "Last hour", "from": "now-24h", "to": "now"},
      {"display": "Last 24 hours", "from": "now-24h", "to": "now"},
      {"display": "Last 7 days", "from": "now-24h", "to": "now"}
    ]
  },
  "templating": {
    "list": [
      {
        "allValue": ".*",
        "current": {"text": "github-actions", "value": "github-actions"},
        "datasource": {"type": "prometheus", "uid": "prometheus"},
        "definition": "label_values(github_actions_traces_span_metrics_calls_total, service_name)",
        "includeAll": true,
        "multi": true,
        "name": "service",
        "options": [
          {"text": "All", "value": "$__all"},
          {"text": "github-actions", "value": "github-actions", "selected": true}
        ],
        "query": "label_values(github_actions_traces_span_metrics_calls_total{service_name=\"github-actions\"}, service_name)",
        "refresh": 2,
        "regex": "",
        "sort": 1,
        "type": "query",
        "label": "Service"
      },
      {
        "allValue": ".*",
        "current": {"text": "All", "value": "$__all"},
        "datasource": {"type": "prometheus", "uid": "prometheus"},
        "definition": "label_values(github_actions_traces_span_metrics_calls_total{service_name=~\"$service\"}, span_name)",
        "includeAll": true,
        "multi": true,
        "name": "workflow_step",
        "options": [
          {"text": "All", "value": "$__all", "selected": true}
        ],
        "query": "label_values(github_actions_traces_span_metrics_calls_total{service_name=\"github-actions\"}, span_name)",
        "refresh": 2,
        "regex": "",
        "sort": 1,
        "type": "query",
        "label": "Workflow Step"
      },
      {
        "allValue": ".*",
        "current": {"text": "All", "value": "$__all"},
        "datasource": {"type": "prometheus", "uid": "prometheus"},
        "definition": "label_values(github_actions_traces_span_metrics_calls_total{service_name=~\"$service\",span_name=~\"$workflow_step\"}, status_code)",
        "includeAll": true,
        "multi": true,
        "name": "status",
        "options": [],
        "query": "label_values(github_actions_traces_span_metrics_calls_total{service_name=~\"$service\",span_name=~\"$workflow_step\"}, status_code)",
        "refresh": 2,
        "regex": "",
        "sort": 1,
        "type": "query",
        "label": "Status"
      },
      {
        "current": {"text": "1h", "value": "1h"},
        "options": [
          {"text": "15m", "value": "15m"},
          {"text": "1h", "value": "1h"},
          {"text": "6h", "value": "6h"},
          {"text": "24h", "value": "24h"}
        ],
        "name": "time_window",
        "type": "custom",
        "label": "Time Window"
      },
      {
        "current": {"text": "", "value": ""},
        "name": "search_filter",
        "type": "textbox",
        "label": "Search Filter"
      }
    ]
  },
  "panels": [
    {
      "id": 1,
      "title": "Filter Summary",
      "type": "stat",
      "targets": [
        {
          "expr": "count(count by (service_name) (github_actions_traces_span_metrics_calls_total{service_name=~\"$service\"}))",
          "refId": "A"
        },
        {
          "expr": "count(count by (span_name) (github_actions_traces_span_metrics_calls_total{service_name=~\"$service\",span_name=~\"$workflow_step\"}))",
          "refId": "B"
        },
        {
          "expr": "sum(github_actions_traces_span_metrics_calls_total{service_name=~\"$service\",span_name=~\"$workflow_step\",status_code=~\"$status\"})",
          "refId": "C"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "unit": "short",
          "custom": {"displayMode": "basic"}
        },
        "overrides": [
          {
            "matcher": {"id": "byFrameRefID", "options": "A"},
            "properties": [{"id": "displayName", "value": "Repositories"}]
          },
          {
            "matcher": {"id": "byFrameRefID", "options": "B"},
            "properties": [{"id": "displayName", "value": "Workflows"}]
          },
          {
            "matcher": {"id": "byFrameRefID", "options": "C"},
            "properties": [{"id": "displayName", "value": "Total Runs"}]
          }
        ]
      },
      "gridPos": {"h": 4, "w": 24, "x": 0, "y": 0}
    },
    {
      "id": 2,
      "title": "Searchable Workflow Runs",
      "type": "table",
      "targets": [
        {
          "expr": "sort_desc(sum by (service_name, span_name, status_code, span_kind) (github_actions_traces_span_metrics_calls_total{service_name=~\"$service\",span_name=~\"$workflow_step\",status_code=~\"$status\"}))",
          "refId": "A",
          "format": "table",
          "instant": true
        },
        {
          "expr": "sum by (service_name, span_name, status_code) (github_actions_traces_span_metrics_duration_seconds_sum{service_name=~\"$service\",span_name=~\"$workflow_step\",status_code=~\"$status\"}) / sum by (service_name, span_name, status_code) (github_actions_traces_span_metrics_duration_seconds_count{service_name=~\"$service\",span_name=~\"$workflow_step\",status_code=~\"$status\"})",
          "refId": "B",
          "format": "table",
          "instant": true
        }
      ],
      "fieldConfig": {
        "defaults": {
          "custom": {
            "align": "left",
            "filterable": true
          }
        },
        "overrides": [
          {
            "matcher": {"id": "byName", "options": "service_name"},
            "properties": [
              {"id": "displayName", "value": "Service"},
              {"id": "custom.width", "value": 120}
            ]
          },
          {
            "matcher": {"id": "byName", "options": "span_name"},
            "properties": [
              {"id": "displayName", "value": "Workflow"},
              {"id": "custom.width", "value": 150}
            ]
          },
          {
            "matcher": {"id": "byName", "options": "vcs_ref_head"},
            "properties": [
              {"id": "displayName", "value": "Branch"},
              {"id": "custom.width", "value": 100}
            ]
          },
          {
            "matcher": {"id": "byName", "options": "cicd_pipeline_task_run_sender_login"},
            "properties": [
              {"id": "displayName", "value": "Actor"},
              {"id": "custom.width", "value": 100}
            ]
          },
          {
            "matcher": {"id": "byName", "options": "cicd_pipeline_task_run_id"},
            "properties": [
              {"id": "displayName", "value": "Run ID"},
              {"id": "custom.width", "value": 120},
              {"id": "links", "value": [
                {
                  "targetBlank": true,
                  "title": "View Trace Details",
                  "url": "/d/gh-workflow-traces?var-run_id=${__value.raw}&${__url_time_range}"
                }
              ]}
            ]
          },
          {
            "matcher": {"id": "byName", "options": "vcs_ref_head_revision"},
            "properties": [
              {"id": "displayName", "value": "Commit SHA"},
              {"id": "custom.width", "value": 120},
              {"id": "custom.displayMode", "value": "color-text"}
            ]
          },
          {
            "matcher": {"id": "byName", "options": "status_code"},
            "properties": [
              {"id": "displayName", "value": "Status"},
              {"id": "custom.width", "value": 80},
              {"id": "custom.displayMode", "value": "color-background"},
              {"id": "mappings", "value": [
                {"options": {"STATUS_CODE_OK": {"color": "green", "index": 0, "text": "Success"}}, "type": "value"},
                {"options": {"STATUS_CODE_ERROR": {"color": "red", "index": 1, "text": "Failed"}}, "type": "value"}
              ]}
            ]
          },
          {
            "matcher": {"id": "byRegexp", "options": "Value #B"},
            "properties": [
              {"id": "displayName", "value": "Duration"},
              {"id": "unit", "value": "s"},
              {"id": "custom.width", "value": 80}
            ]
          }
        ]
      },
      "transformations": [
        {
          "id": "filterFieldsByName",
          "options": {
            "include": {
              "names": ["service_name", "span_name", "status_code", "span_kind", "Value #B"]
            }
          }
        }
      ],
      "gridPos": {"h": 12, "w": 24, "x": 0, "y": 4}
    },
    {
      "id": 3,
      "title": "Workflow Execution Timeline",
      "type": "timeseries",
      "targets": [
        {
          "expr": "sum by (span_name, status_code) (rate(github_actions_traces_span_metrics_calls_total{service_name=~\"$service\",span_name=~\"$workflow_step\",status_code=~\"$status\"}[5m]))",
          "refId": "A",
          "legendFormat": "{{span_name}} - {{status_code}}"
        }
      ],
      "fieldConfig": {
        "defaults": {
          "unit": "reqps",
          "custom": {
            "drawStyle": "line",
            "lineInterpolation": "smooth",
            "fillOpacity": 20,
            "stacking": {"mode": "normal"}
          }
        }
      },
      "options": {
        "legend": {
          "displayMode": "table",
          "placement": "bottom",
          "values": ["last", "max"]
        }
      },
      "gridPos": {"h": 8, "w": 24, "x": 0, "y": 16}
    },
    {
      "id": 4,
      "title": "Error Pattern Analysis",
      "type": "table",
      "targets": [
        {
          "expr": "topk(20, sum by (status_code, span_name, service_name) (github_actions_traces_span_metrics_calls_total{status_code!=\"STATUS_CODE_OK\",service_name=~\"$service\",span_name=~\"$workflow_step\"}))",
          "refId": "A",
          "format": "table",
          "instant": true
        }
      ],
      "fieldConfig": {
        "defaults": {
          "custom": {
            "align": "left",
            "filterable": true
          }
        },
        "overrides": [
          {
            "matcher": {"id": "byName", "options": "status_code"},
            "properties": [
              {"id": "displayName", "value": "Error Type"},
              {"id": "custom.displayMode", "value": "color-background"}
            ]
          },
          {
            "matcher": {"id": "byName", "options": "span_name"},
            "properties": [{"id": "displayName", "value": "Step/Component"}]
          },
          {
            "matcher": {"id": "byName", "options": "span_name"},
            "properties": [{"id": "displayName", "value": "Workflow"}]
          },
          {
            "matcher": {"id": "byName", "options": "Value"},
            "properties": [
              {"id": "displayName", "value": "Error Count"},
              {"id": "custom.displayMode", "value": "gradient-gauge"}
            ]
          }
        ]
      },
      "gridPos": {"h": 8, "w": 12, "x": 0, "y": 24}
    },
    {
      "id": 5,
      "title": "Commit SHA Correlation",
      "type": "table",
      "targets": [
        {
          "expr": "sum by (service_name, span_name, status_code, span_kind) (github_actions_traces_span_metrics_calls_total{service_name=~\"$service\",span_name=~\"$workflow_step\",status_code=~\"$status\"})",
          "refId": "A",
          "format": "table",
          "instant": true
        }
      ],
      "fieldConfig": {
        "defaults": {
          "custom": {
            "align": "left",
            "filterable": true
          }
        },
        "overrides": [
          {
            "matcher": {"id": "byName", "options": "vcs_ref_head_revision"},
            "properties": [
              {"id": "displayName", "value": "Commit SHA"},
              {"id": "custom.width", "value": 120}
            ]
          },
          {
            "matcher": {"id": "byName", "options": "vcs_ref_head_revision_author_name"},
            "properties": [
              {"id": "displayName", "value": "Author"},
              {"id": "custom.width", "value": 100}
            ]
          },
          {
            "matcher": {"id": "byName", "options": "span_name"},
            "properties": [{"id": "displayName", "value": "Workflow"}]
          },
          {
            "matcher": {"id": "byName", "options": "status_code"},
            "properties": [
              {"id": "displayName", "value": "Status"},
              {"id": "custom.displayMode", "value": "color-background"},
              {"id": "mappings", "value": [
                {"options": {"STATUS_CODE_OK": {"color": "green", "index": 0, "text": "Success"}}, "type": "value"},
                {"options": {"STATUS_CODE_ERROR": {"color": "red", "index": 1, "text": "Failed"}}, "type": "value"}
              ]}
            ]
          },
          {
            "matcher": {"id": "byName", "options": "Value"},
            "properties": [{"id": "displayName", "value": "Runs"}]
          }
        ]
      },
      "gridPos": {"h": 8, "w": 12, "x": 12, "y": 24}
    }
  ],
  "links": [
    {
      "asDropdown": false,
      "icon": "external link",
      "includeVars": false,
      "keepTime": true,
      "tags": ["github", "health"],
      "targetBlank": false,
      "title": "Back to Health Overview",
      "tooltip": "Return to workflow health overview",
      "type": "dashboards",
      "url": "/d/gh-workflow-health"
    },
    {
      "asDropdown": false,
      "icon": "external link",
      "includeVars": true,
      "keepTime": true,
      "tags": ["github", "performance"],
      "targetBlank": true,
      "title": "Repository Performance",
      "tooltip": "View repository performance dashboard",
      "type": "dashboards",
      "url": "/d/gh-repo-performance"
    }
  ],
  "refresh": "10s",
  "schemaVersion": 37,
  "version": 1
}